"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6411],{29670:(e,t,n)=>{n.d(t,{LegalDocsProvider:()=>i,S:()=>s});var o=n(54568),r=n(7620);let a=(0,r.createContext)(void 0),i=e=>{let{value:t,children:n}=e;return(0,o.jsx)(a.Provider,{value:t,children:n})};function s(){return(0,r.useContext)(a)}},39480:(e,t,n)=>{n.d(t,{ArkoseTokenProvider:()=>v,D5:()=>p,vr:()=>h});var o=n(54568),r=n(1613),a=n(68067),i=n(28044),s=n(56929),c=n(23792),l=n(7620),u=n(44995),d=n(18088);let g="ak-session-token",f=e=>{let{host:t,apiKey:n,nonce:r,integrity:a,onCompleted:i,onShown:s,onShow:u,onHide:d,onError:g,onScriptError:f,setArkoseEnforcement:_}=e,m=e=>{e.setConfig({onCompleted:i,onShown:s,onShow:u,onHide:d,onError:g}),_(e)};return(0,l.useEffect)(()=>()=>{window.setupEnforcement=void 0},[]),(0,o.jsx)(c.default,{id:"arkose-script",src:"https://".concat(t,"/v2/").concat(n,"/api.js"),type:"text/javascript","data-callback":"setupEnforcement",async:!0,defer:!0,onLoad:()=>{window.setupEnforcement||(window.setupEnforcement=m)},onError:f,nonce:r,integrity:a,crossOrigin:"anonymous"})},_=()=>{let e=(0,i.V)(),t=(0,u.fZ)(),n=(0,a.fS)("ak_enabled");return!e&&t&&n},m=(0,l.createContext)({isReady:!1,isChallenging:!1,lastCallerId:void 0,needsToken:!1,startTokenFlow:()=>{}});function v(e){let{host:t,apiKey:n,nonce:r,integrity:a,children:i}=e,[c,u]=(0,l.useState)(_()&&!!t&&!!n&&!!a),[v,h]=(0,l.useState)(void 0),[p,y]=(0,l.useState)(void 0),[S,k]=(0,l.useState)(void 0),[C,T]=(0,l.useState)(!1),[E,w]=(0,d.Vc)(g,void 0),P=c&&!E;return(0,o.jsxs)(m.Provider,{value:{isReady:!!v,isChallenging:C,needsToken:P,lastCallerId:p,startTokenFlow:(e,t)=>{y(e),k(t),null==v||v.run()}},children:[i,c&&(0,o.jsx)(f,{host:t,apiKey:n,nonce:r,integrity:a,onCompleted:e=>{w(e.token),S&&(S(),k(void 0))},onShown:()=>T(!0),onShow:()=>T(!0),onHide:()=>T(!1),onError:e=>{(0,s.Cp)(e.error)},onScriptError:e=>{u(!1),(0,s.Cp)(e)},setArkoseEnforcement:h})]})}function h(){return(0,l.useContext)(m)}let p=()=>{let e=_(),[t,n,o]=(0,d.Vc)(g,void 0),{mutateAsync:a}=(0,r.L2)("api/arkose/verify","POST");return(0,l.useCallback)(async()=>{e&&t&&(o(),await a({session_token:t}))},[e,a,t,o])}},39951:(e,t,n)=>{n.d(t,{IQ:()=>a,Jd:()=>o,lx:()=>r});let o=["proMonthlyPromoCode","proAnnualPromoCode","welcomeMessageTitle","utmParams","max5xMonthlyPromoCode","max20xMonthlyPromoCode"],r=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},a=(e,t)=>(null==t?void 0:t.overrides)?{...e,...t.overrides}:e},66411:(e,t,n)=>{n.d(t,{Cu:()=>P,F7:()=>T,NA:()=>L,VL:()=>w,Vq:()=>b,WX:()=>C,bl:()=>E,nY:()=>k});var o=n(39480),r=n(44995),a=n(66046),i=n(64328),s=n(35984),c=n(29670),l=n(93112),u=n(3743),d=n(39613),g=n(77001),f=n(80688);n(28);var _=n(68067),m=n(4869),v=n(27541),h=n(7620),p=n(94295),y=n(77062),S=n(40459);let k=()=>{let e=(0,v.useRouter)(),t=(0,a.l)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,n)=>{t.set(d.eT.LAST_ACTIVE_ORG,e),n?location.pathname=n:location.reload()}}},C=(e,t,n)=>{let o=(0,c.S)(),{mutateAsync:r}=(0,p.nX)();return(0,h.useCallback)(async()=>{if(!e||!o||0===t.length)return;let a=t.map(e=>({document_id:"v3:".concat(e,":").concat(o[e]),accepted_via_checkbox:n}));await r({acceptances:a})},[e,o,t,r,n])},T=e=>{let t=(0,c.S)(),{mutateAsync:n}=(0,p.nX)();return(0,h.useCallback)(async o=>{if(!e||!t)return;let r=Object.entries(o).map(e=>{let[n,o]=e;return{document_id:"v3:".concat(n,":").concat(t[n]),accepted_via_checkbox:o}});0!==r.length&&await n({acceptances:r})},[e,t,n])},E=(e,t)=>{let{account:n,refetch:o,setActiveOrganizationUuid:r}=(0,i.YL)(),[a,c]=(0,h.useState)(!1),[l,u]=(0,h.useState)(!1),d=w(),{addSuccess:g}=(0,s.Y)(),{data:_}=(0,p.kd)(e),v=(0,m.useQueryClient)();return(0,h.useEffect)(()=>{n&&a&&l&&(t?t(d):d())},[l,d,a,n,t]),(0,h.useCallback)(async()=>{c(!0);let e=await o();if(await v.invalidateQueries({queryKey:[f.Jz]}),(null==_?void 0:_.organization_uuid)&&(r(_.organization_uuid),g("Successfully joined ".concat(_.organization_name))),e&&"google"in window){var t,n,a;null==(a=window.google)||null==(n=a.accounts)||null==(t=n.id)||t.cancel()}u(!0)},[_,g,o,r,v])},w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,v.useSearchParams)().get("returnTo"),n=P(e);return(0,h.useCallback)(()=>{n(t)},[n,t])},P=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,i.YL)(),[n,a]=(0,h.useState)(!1),s=(0,v.useRouter)(),[c,d]=(0,h.useState)(null),g=(0,v.usePathname)(),f=(0,v.useSearchParams)(),m=(0,r.fZ)(),p=(e=>{let{account:t}=(0,i.YL)(),n=(0,l.y_)(e),r=(0,o.D5)(),a=(0,_.fS)("age_gate_reverification");return((0,h.useEffect)(()=>{t&&r()},[t,r]),t&&((0,u.VH)({account:t,isClaudeDot:e})||(0,u.Bs)(t,e)))?"/onboarding":t&&(0,u.u5)(t,e,a)?"/age-verification":t&&(0,u.NJ)(t,e)?"/invites":t&&(0,u.Ah)(t,e)?"/create":t&&n?"/upgrade":e?"/new":"/dashboard"})(m);return(0,h.useEffect)(()=>{(n||e)&&!t&&s.push((0,y.rt)(g,f.toString()))},[t,s,n,e,g,f]),(0,h.useEffect)(()=>{if(n&&t){let e=(0,y.Cy)(t,c,p,m,!!S.env.NEXT_PUBLIC_SHOW_US_GOVT_SYSTEM_USE_NOTIFICATION);e!==window.location.href.replace(window.location.origin,"")&&(s.push(e),s.refresh())}},[t,s,n,c,p,m]),(0,h.useCallback)(e=>{e&&d(decodeURIComponent(e)),a(!0)},[])};function b(){let[e,t]=(0,h.useState)(!1);return{getRecaptchaToken:(0,h.useCallback)(async(e,n)=>S.env.NEXT_PUBLIC_DISABLE_RECAPTCHA||(0,g.Vm)()?Promise.resolve("recaptcha-ignore-token"):(t(!0),new Promise((o,r)=>{if("undefined"==typeof grecaptcha)return t(!1),r(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:n}).then(e=>{o(e),t(!1)},e=>{t(!1),r(e)})})})),[]),isLoading:e}}function L(e){let[t,n]=(0,h.useState)(!1);(0,h.useEffect)(()=>{if(!t){let t=setInterval(()=>{(window.grecaptcha||S.env.NEXT_PUBLIC_DISABLE_RECAPTCHA)&&(n(!0),e())},10);return()=>clearInterval(t)}},[t,n,e])}},77062:(e,t,n)=>{n.d(t,{CZ:()=>u,Cy:()=>a,HT:()=>c,TR:()=>l,q:()=>s,rt:()=>i});var o=n(3743),r=n(39613);let a=(e,t,n,a,i)=>{if(i&&!localStorage.getItem(r.EB.ACCEPTED_US_GOVERNMENT_SYSTEM_NOTIFICATION))return"/us-govt-system-warning";if(!t||!t.startsWith("/")||"/"===t||"/?"===t)return n;if((0,o.Xs)(e,a)){let e=new URL(n,window.location.origin),o=new URLSearchParams(e.search);return o.set("returnTo",t),"".concat(e.pathname,"?").concat(o.toString())}return s(t)},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r="".concat(e,"?").concat(t),a=new URLSearchParams(o);return a.append("returnTo",r),"".concat(n,"?").concat(a.toString())};function s(e){let t=new URL(e,"http://example.com");return t.pathname.replace(/^\/+/,"/")+t.search}function c(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t&&e.push(...Object.keys(localStorage).filter(e=>e.startsWith("".concat(r.sn,".")))),e.reduce((e,t)=>{let n=localStorage.getItem(t);return null!==n&&e.push([t,n]),e},[])}function l(e){e.forEach(e=>{let[t,n]=e;localStorage.setItem(t,n)})}function u(e){if(!e)return null;try{let t=decodeURIComponent(e);return new URL(t,window.location.origin).searchParams}catch(e){return null}}},93112:(e,t,n)=>{n.d(t,{Hc:()=>_,XK:()=>m,Zl:()=>h,hz:()=>f,y_:()=>v});var o=n(1613),r=n(66046),a=n(35984),i=n(39613),s=n(80688),c=n(68067),l=n(7620),u=n(10369),d=n(25691),g=n(39951);function f(){var e;let t=(0,r.l)(),n=null!=(e=t.get(i.eT.PROMOTION))?e:null;return{data:(0,g.lx)(n),mutate:(0,l.useCallback)(e=>{t.set(i.eT.PROMOTION,JSON.stringify(e),{maxAgeSeconds:7776e3})},[t]),delete:(0,l.useCallback)(()=>{t.delete(i.eT.PROMOTION)},[t])}}function _(){var e,t,n;let{data:r}=f(),a=(t=null!=(e=null==r?void 0:r.promotionId)?e:null,n=e=>(0,g.IQ)(e,r),(0,o.Sk)("/api/billing/promotion/".concat(t),{queryKey:[s.t6,t],enabled:!!t,meta:{noToast:!0}},e=>(e.promotionId=t,n)?n(e):e));return{...a,isPending:a.isPending&&!!(null==r?void 0:r.promotionId)}}function m(){let{data:e,mutate:t}=f();(0,l.useEffect)(()=>{(null==e?void 0:e.needsCheckout)&&(e.needsCheckout=void 0,t(e))},[e,t])}function v(e){let{data:t,mutate:n}=f(),o=null==t?void 0:t.promotionId,r=(0,c.T9)("claude_ai_targeted_promotion","promotionId",null,d.Yj().nullable());return(0,l.useEffect)(()=>{!o&&r&&n({promotionId:r})},[o,r,n]),!!e&&!!(null==t?void 0:t.needsCheckout)&&!!(null==t?void 0:t.promotionId)}let h=()=>{let e=(0,l.useRef)(!1),t=(0,a.Y)(),n=(0,u.A)(),{delete:o}=f();return(0,l.useCallback)(r=>{(null==r?void 0:r.offerError)&&!e.current&&(e.current=!0,t.addError(n.formatMessage({defaultMessage:"This promotion is not available for your account",id:"Vu9kt6ezVH"}),{error:Error(r.offerError),messageForLogging:"This promotion is not available for your account"}),o())},[t,o,n])}},94295:(e,t,n)=>{n.d(t,{B5:()=>f,BL:()=>k,DK:()=>_,IX:()=>b,Ng:()=>y,Nv:()=>S,QP:()=>I,Z5:()=>p,a0:()=>m,gz:()=>L,jU:()=>E,kd:()=>P,mY:()=>h,nX:()=>T,vt:()=>g,yJ:()=>C,zt:()=>v});var o=n(74813),r=n(1613),a=n(44995),i=n(16178),s=n(96089),c=n(80688),l=n(66365),u=n(4869),d=n(27541);function g(e,t){return(0,r.Sk)("/api/auth/login_methods?email=".concat(encodeURIComponent(e||""),"&source=").concat(t),{enabled:!!e&&(0,s.B9)(e),meta:{noToast:!0}})}let f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)();return(0,r.L2)("/api/auth/send_magic_link","POST",{...e,onSuccess:(n,o,r)=>{n.sso_url?t({event_key:"login.email.sso_initiated"}):t({event_key:"login.email.magic_link_sent"}),e.onSuccess&&e.onSuccess(n,o,r)},onError:(n,o,r)=>{t({event_key:"login.email.magic_link_send_error",error:n.message,error_type:n instanceof i.LG?n.type:"unknown"}),e.onError&&e.onError(n,o,r)},onMutate:e=>{t({event_key:"login.email.sending_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.fZ)();return(0,r.L2)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),s=(0,a.Mk)(),{client:c}=(0,l.useStatsigClient)();return(0,r.L2)("/api/auth/verify_magic_link","POST",{...e,onSuccess:(n,o,r)=>{"code"===o.credentials.method?t({event_key:"login.email.finished"}):t({event_key:"login.email.magic_link_success"}),w(c,n,t,"email","magic_link",s),e.onSuccess&&e.onSuccess(n,o,r)},onError:(n,o,r)=>{if("code"===o.credentials.method){let e="unknown";"already_used"===n.message?e="already_used":n instanceof i.LG&&"rate_limit_error"===n.type?e="rate_limit":n instanceof i.LG&&400===n.statusCode&&(e="incorrect_code"),t({event_key:"login.email.code_verification_error",error:n.message,error_type:e})}else t({event_key:"login.email.magic_link_verification_error",error:n.message});e.onError&&e.onError(n,o,r)},onMutate:e=>{"code"===e.credentials.method?t({event_key:"login.email.verifying_code"}):t({event_key:"login.email.verifying_magic_link"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),i=(0,a.Mk)(),s=(0,d.useRouter)(),{client:c}=(0,l.useStatsigClient)();return(0,r.L2)("/api/auth/verify_google","POST",{...e,onSuccess:(n,o,r)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),s.push(n.sso_url)):(t({event_key:"login.google.finished"}),w(c,n,t,"google","button",i),e.onSuccess&&e.onSuccess(n,o,r))},onError:(n,o,r)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,o,r)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),i=(0,a.Mk)(),s=(0,d.useRouter)(),{client:c}=(0,l.useStatsigClient)();return(0,r.L2)("/api/auth/verify_google_mobile","POST",{...e,onSuccess:(n,o,r)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),s.push(n.sso_url)):(t({event_key:"login.google.finished",flow_type:"one_tap"}),w(c,n,t,"google","onetap",i),e.onSuccess&&e.onSuccess(n,o,r))},onError:(n,o,r)=>{t({event_key:"login.google.verification_error",error:n.message}),e.onError&&e.onError(n,o,r)},onMutate:e=>{t({event_key:"login.google.verifying"})},transformVariables:e=>({...e,source:n?"claude":"console"})})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{track:t}=(0,o.st)(),n=(0,a.fZ)(),i=(0,d.useRouter)();return(0,r.L2)("/api/auth/accept_invite","POST",{...e,onSuccess:(n,o,r)=>{!n.success&&n.sso_url?(t({event_key:"login.email.sso_initiated"}),i.push(n.sso_url)):e.onSuccess&&e.onSuccess(n,o,r)},transformVariables:e=>({...e,source:n?"claude":"console"})})},y=()=>(0,r.L2)("/api/auth/logout","POST"),S=()=>(0,r.L2)("/api/auth/logout/all-sessions","POST"),k=()=>{let e=(0,u.useQueryClient)();return(0,r.L2)("/api/account?statsig_hashing_algorithm=djb2","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[c.Rw]})}})},C=()=>(0,r.Qv)("/api/account/settings","PATCH",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:{...t.account.settings,...e}}}:t,{queryKey:[c.Rw]}),T=()=>{let e=(0,u.useQueryClient)();return(0,r.L2)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries({queryKey:[c.Rw]})}})},E=()=>(0,r.L2)("/api/account/email_consent","PUT");function w(e,t,n,o,r,a){t.created&&n({event_key:"login.account.created",surface:a,authMethod:o,flow:r},t.account)}function P(e){return(0,r.Sk)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function b(e){return(0,r.Sk)("/api/enterprise_auth/idp_redirect_url?organization_id=".concat(e),{meta:{noToast:!0}})}function L(e,t,n){return(0,r.Sk)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(t,"&source=").concat(n),{meta:{noToast:!0}})}function I(e,t){var n;let o=(0,u.useQueryClient)();return(0,r.L2)("/api/highside/login","GET",{...t,headers:{...null!=(n=t.headers)?n:{},...e},async onSuccess(){for(var e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];await o.invalidateQueries({queryKey:[c.Rw]}),null==(e=t.onSuccess)||e.call(t,...r)}})}},96089:(e,t,n)=>{n.d(t,{B9:()=>r,Lj:()=>a});let o=/^[A-Za-z0-9._%+\u0027-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$/,r=e=>o.test(e),a=(e,t)=>{if(!t)return!1;let n=e.split("@")[1];return t.includes(n)}}}]);